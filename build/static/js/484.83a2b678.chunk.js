"use strict";(self.webpackChunkflodhasten=self.webpackChunkflodhasten||[]).push([[484],{484:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(950),n=s(826),r=s(222),o=s(840),l=s(414);const c=a.memo(e=>{let{words:t,skillWords:s,onDelete:c,onEdit:i,onImportWords:d,onAdd:u,isDarkMode:h}=e;const[g,m]=(0,a.useState)(null),[x,f]=(0,a.useState)(""),[b,y]=(0,a.useState)(""),[p,w]=(0,a.useState)(""),[k,v]=(0,a.useState)(null),[j,N]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!1),[T,P]=(0,a.useState)(""),[A,W]=(0,a.useState)(""),[E,D]=(0,a.useState)(""),B=(0,a.useCallback)((e,t)=>{const s=[];if("csv"===t){const t=e.split(/\r?\n/).filter(Boolean),a=t[0].toLowerCase(),n=a.includes("english")&&a.includes("swedish");for(let e=1;e<t.length;e++){const a=t[e].split(",");if(n){const[e,t]=a;e&&t?s.push({swedish:e.trim(),english:t.trim(),stats:{correct:0,incorrect:0,lastPracticed:null}}):e&&s.push({swedish:e.trim(),english:"(unknown)",stats:{correct:0,incorrect:0,lastPracticed:null}})}else{const e=a[0];e&&s.push({swedish:e.trim(),english:"(unknown)",stats:{correct:0,incorrect:0,lastPracticed:null}})}}}else{const t=e.split(/\r?\n/).filter(Boolean);for(const e of t)if(e.includes(" - ")){const[t,a]=e.split(" - ");t&&a?s.push({swedish:t.trim(),english:a.trim(),stats:{correct:0,incorrect:0,lastPracticed:null}}):t&&s.push({swedish:t.trim(),english:"(unknown)",stats:{correct:0,incorrect:0,lastPracticed:null}})}else{const t=e.trim();t&&s.push({swedish:t,english:"(unknown)",stats:{correct:0,incorrect:0,lastPracticed:null}})}}return s},[]);function O(){i(g,{swedish:x,english:b}),m(null)}function I(){m(null)}return(0,l.jsxs)("div",{className:"max-w-md mx-auto my-8 bg-amber-50 dark:bg-gray-800 p-6 rounded-xl shadow-md dark:shadow-gray-900/30",children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-amber-600 dark:text-amber-400 flex items-center mb-4",children:[(0,l.jsx)(n.hko,{className:"mr-2"}),(0,l.jsx)("span",{children:"Saved Words"})]}),(0,l.jsxs)("div",{className:"mb-6 p-4 bg-cyan-50 dark:bg-cyan-900/20 rounded-lg border-2 border-cyan-200 dark:border-cyan-800",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("h3",{className:"text-lg font-medium text-cyan-700 dark:text-cyan-400 flex items-center m-0",children:[(0,l.jsx)(r.dZJ,{className:"mr-2"}),(0,l.jsx)("span",{children:"Add New Word"})]}),(0,l.jsx)("button",{onClick:()=>C(!S),className:"bg-cyan-600 hover:bg-cyan-700 dark:bg-cyan-700 dark:hover:bg-cyan-600 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 transform hover:-translate-y-0.5 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800",children:S?"Cancel":"Add Word"})]}),S&&(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),T.trim()&&A.trim()?(u({swedish:T.trim(),english:A.trim()}),P(""),W(""),D("Word added!"),setTimeout(()=>D(""),1200)):D("Please enter both words.")},className:"mt-4",children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2 text-sm font-medium text-cyan-700 dark:text-cyan-400",children:"Swedish"}),(0,l.jsx)("input",{value:T,onChange:e=>P(e.target.value),className:"w-full px-3 py-2 text-sm border border-cyan-200 dark:border-cyan-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400",placeholder:"Enter Swedish word..."})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block mb-2 text-sm font-medium text-cyan-700 dark:text-cyan-400",children:"English"}),(0,l.jsx)("input",{value:A,onChange:e=>W(e.target.value),className:"w-full px-3 py-2 text-sm border border-cyan-200 dark:border-cyan-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400",placeholder:"Enter English translation..."})]}),(0,l.jsx)("button",{type:"submit",className:"w-full py-3 px-4 bg-cyan-600 hover:bg-cyan-700 dark:bg-cyan-700 dark:hover:bg-cyan-600 text-white font-medium rounded-lg transition-all duration-200 transform hover:-translate-y-0.5 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 active:translate-y-0 active:shadow-sm",children:"Add Word"}),E&&(0,l.jsx)("div",{className:"mt-3 text-center font-medium text-green-600 dark:text-green-400",children:E})]})]}),(0,l.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-blue-700 dark:text-blue-400 mb-3",children:"Import Words"}),(0,l.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,l.jsxs)("label",{className:"flex items-center justify-center w-full px-4 py-2 border-2 border-dashed border-blue-300 dark:border-blue-700 rounded-lg cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:[(0,l.jsx)("input",{type:"file",accept:".csv,.txt",onChange:function(e){const t=e.target.files[0];if(!t)return;const s=t.name.split(".").pop().toLowerCase();if("csv"!==s&&"txt"!==s)return void w("Please upload a .csv or .txt file.");const a=new FileReader;a.onload=e=>{const t=e.target.result,a=B(t,s);0===a.length?w("No valid words found in file."):(w(`Imported ${a.length} words!`),d&&d(a))},a.readAsText(t)},className:"hidden"}),(0,l.jsx)("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"Choose CSV or TXT file"})]}),(0,l.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1",children:"Import .csv (Swedish,English) or .txt (Swedish - English)"})]}),(0,l.jsxs)("button",{type:"button",onClick:async function(){N(!0),w("");const e=[],s=[];for(let n=0;n<t.length;n++)"(unknown)"===t[n].english&&(e.push(n),s.push(t[n].swedish));if(0===s.length)return N(!1),void w("No unknowns to translate.");try{const t=await fetch("http://localhost:4000/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swedishArray:s})}),a=await t.json();if(a.translations&&a.translations.length===s.length){for(let t=0;t<e.length;t++)i(e[t],{swedish:s[t],english:a.translations[t]});w("Batch translation complete!")}else w("Batch translation failed.")}catch(a){w("Batch translation error.")}v(null),N(!1)},disabled:j,className:`mt-4 w-full py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 flex items-center justify-center\n            ${j?"bg-blue-400 dark:bg-blue-700 cursor-not-allowed opacity-70":"bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600 hover:-translate-y-0.5 hover:shadow-md active:translate-y-0 active:shadow-sm"}\n            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800`,children:[j&&(0,l.jsx)(n.hW,{className:"animate-spin mr-2"}),"Translate All Unknown"]}),p&&(0,l.jsx)("div",{className:"mt-2 text-sm font-medium text-green-600 dark:text-green-400",children:p})]}),0===t.length?(0,l.jsx)("div",{className:"text-gray-400 dark:text-gray-500 text-center py-6",children:"No words yet. Add some!"}):(0,l.jsx)("ul",{className:"list-none p-0 space-y-3",children:t.map((e,a)=>{var d,u,h;const p=a<s.length;return(0,l.jsxs)("li",{className:"flex items-center justify-between rounded-lg p-3 border "+(p?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-amber-50 dark:bg-amber-900/10 border-amber-200 dark:border-amber-800"),children:[g===a?(0,l.jsxs)("span",{className:"flex-1 flex items-center gap-2",children:[(0,l.jsx)("input",{value:x,onChange:e=>f(e.target.value),className:"w-24 px-2 py-1 text-sm border border-cyan-200 dark:border-cyan-700 rounded focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 dark:bg-gray-700 dark:text-white"}),(0,l.jsx)("span",{className:"text-gray-400 dark:text-gray-500",children:"\u2013"}),(0,l.jsx)("input",{value:b,onChange:e=>y(e.target.value),className:"w-24 px-2 py-1 text-sm border border-cyan-200 dark:border-cyan-700 rounded focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 dark:bg-gray-700 dark:text-white"})]}):(0,l.jsxs)("span",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center flex-wrap",children:[(0,l.jsx)("span",{className:"font-bold text-cyan-600 dark:text-cyan-400",children:e.swedish}),(0,l.jsx)("button",{type:"button","aria-label":`Play ${e.swedish}`,onClick:()=>async function(e){try{await o.A.playSwedish(e)}catch(t){console.error("TTS failed:",t.message)}}(e.swedish),className:"bg-transparent border-none text-cyan-600 dark:text-cyan-400 cursor-pointer mx-1 p-1 hover:bg-cyan-100 dark:hover:bg-cyan-900/30 rounded-full focus:outline-none focus:ring-2 focus:ring-cyan-500",children:(0,l.jsx)(r.guq,{className:"text-xl"})}),(0,l.jsx)("span",{className:"text-gray-400 dark:text-gray-500 mx-1",children:"\u2013"}),(0,l.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:e.english}),p&&(0,l.jsx)("span",{className:"ml-2 bg-green-500 dark:bg-green-600 text-white text-xs px-2 py-0.5 rounded-full font-medium",children:"Skill"}),"(unknown)"===e.english&&(0,l.jsx)("button",{type:"button",onClick:()=>async function(e,t){v(e);try{const s=await fetch("http://localhost:4000/api/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({swedishArray:[t]})}),a=await s.json();a.translations&&a.translations[0]?i(e,{swedish:t,english:a.translations[0]}):w("Translation failed.")}catch(s){w("Translation error.")}v(null)}(a,e.swedish),disabled:k===a,className:`ml-2 px-3 py-1 text-xs rounded-md font-medium text-white transition-all duration-200\n                            ${k===a?"bg-cyan-400 dark:bg-cyan-700 cursor-not-allowed":"bg-cyan-600 hover:bg-cyan-700 dark:bg-cyan-700 dark:hover:bg-cyan-600 hover:-translate-y-0.5 hover:shadow-sm"}\n                            focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-1`,children:k===a?(0,l.jsx)(n.hW,{className:"animate-spin"}):"Translate"})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center gap-2",children:[(0,l.jsxs)("span",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"text-green-500 mr-0.5",children:"\u2713"})," ",(null===(d=e.stats)||void 0===d?void 0:d.correct)||0]}),(0,l.jsxs)("span",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"text-red-500 mr-0.5",children:"\u2717"})," ",(null===(u=e.stats)||void 0===u?void 0:u.incorrect)||0]}),(0,l.jsxs)("span",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"text-gray-400 mr-0.5",children:"\u23f1"})," ",null!==(h=e.stats)&&void 0!==h&&h.lastPracticed?new Date(e.stats.lastPracticed).toLocaleDateString():"Never"]})]})]}),g===a?(0,l.jsxs)("span",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:O,className:"bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 text-white font-medium py-1 px-3 rounded transition-all duration-200 hover:-translate-y-0.5 hover:shadow-sm active:translate-y-0 active:shadow-none focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1",children:"Save"}),(0,l.jsx)("button",{onClick:I,className:"bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-600 text-white font-medium py-1 px-3 rounded transition-all duration-200 hover:-translate-y-0.5 hover:shadow-sm active:translate-y-0 active:shadow-none focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1",children:"Cancel"})]}):(0,l.jsx)("span",{className:"flex gap-2",children:!p&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>function(e){m(e),f(t[e].swedish),y(t[e].english)}(a),className:"bg-cyan-600 hover:bg-cyan-700 dark:bg-cyan-700 dark:hover:bg-cyan-600 text-white p-2 rounded transition-all duration-200 hover:-translate-y-0.5 hover:shadow-sm active:translate-y-0 active:shadow-none focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-1","aria-label":"Edit word",children:(0,l.jsx)(n.uO9,{})}),(0,l.jsx)("button",{onClick:()=>c(a),className:"bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-600 text-white p-2 rounded transition-all duration-200 hover:-translate-y-0.5 hover:shadow-sm active:translate-y-0 active:shadow-none focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1","aria-label":"Delete word",children:(0,l.jsx)(n.qbC,{})})]})})]},a)})})]})})}}]);