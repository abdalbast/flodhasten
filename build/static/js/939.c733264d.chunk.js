"use strict";(self.webpackChunkflodhasten=self.webpackChunkflodhasten||[]).push([[939],{939:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var o=r(950),n=r(222),i=r(840),a=r(414);const s=function(e){let{words:t,onWordStatUpdate:r,onLessonComplete:s,isDarkMode:l}=e;const d=(0,o.useMemo)(()=>{const e=(t||[]).filter(e=>1===e.difficulty);return e.length>=10?e:t||[]},[t]),[c,h]=(0,o.useState)("ready"),[g,p]=(0,o.useState)([]),[f,u]=(0,o.useState)(""),[m,b]=(0,o.useState)(0),[x,y]=(0,o.useState)(3),[w,v]=(0,o.useState)(1),[S,j]=(0,o.useState)(""),[k,C]=(0,o.useState)(!1),M=(0,o.useRef)(null),R=(0,o.useRef)(0),A=(0,o.useRef)(2e3),E=(0,o.useRef)(5),B=l?"#2d2d2d":"#e1f5fe",T=l?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px #81d4fa",D=l?"#64b5f6":"#0288d1",F=l?"#555555":"transparent",z=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#FFB347","#87CEEB","#98FB98","#F0E68C"],W=[{width:100,height:40,type:"I"},{width:80,height:50,type:"O"},{width:120,height:35,type:"T"},{width:70,height:45,type:"L"},{width:90,height:40,type:"S"},{width:110,height:30,type:"Z"}],L=(0,o.useCallback)(()=>{if(!c)return;if(0===d.length)return;const e=d[Math.floor(Math.random()*d.length)],t=z[Math.floor(Math.random()*z.length)],r=W[Math.floor(Math.random()*W.length)],o=r.width,n=320-o;let i,a,s=0;const l=n/3,h=Math.floor(3*Math.random());do{const e=s<3?(h+s)%3:Math.floor(3*Math.random());i=e*l+Math.random()*(l-o),a=-50,s++;if(!g.some(e=>Math.abs(e.x-i)<o&&Math.abs(e.y-a)<40)||s>15)break}while(s<15);const f={id:Date.now()+Math.random(),swedish:e.swedish,english:e.english,x:Math.max(0,Math.min(i,n)),y:a,speed:1+.2*w,answered:!1,color:t,shape:r};p(e=>[...e,f])},[d,w,g]),O=(0,o.useCallback)(()=>{if("playing"!==c)return;p(e=>e.map(e=>{var t;return{...e,y:e.y+e.speed,x:Math.max(0,Math.min(e.x,320-((null===(t=e.shape)||void 0===t?void 0:t.width)||120)))}}).filter(e=>e.y<400&&!e.answered)),p(e=>{const t=e.filter(e=>e.y>=350&&!e.answered);return t.length>0?(y(e=>e<=1?(h("gameOver"),0):e-1),e.filter(e=>!t.includes(e))):e});const e=Date.now();e-R.current>A.current&&g.length<E.current&&(L(),R.current=e),m>0&&m%10===0&&v(e=>{const t=Math.floor(m/10)+1;return e<t?(A.current=Math.max(800,A.current-100),t):e})},[c,w,m,L,g.length]);(0,o.useEffect)(()=>("playing"===c?M.current=setInterval(O,50):M.current&&(clearInterval(M.current),M.current=null),()=>{M.current&&clearInterval(M.current)}),[c,O]);const I=(0,o.useCallback)(e=>{if(e.preventDefault(),!f.trim())return;const t=f.trim().toLowerCase(),o=g.find(e=>!e.answered);o&&t===o.english.toLowerCase()?(p(e=>e.map(e=>e.id===o.id?{...e,answered:!0}:e)),b(e=>e+1),j("\u2705 Correct!"),r&&r(o.swedish,o.english,"correct"),setTimeout(()=>j(""),1e3)):(j("\u274c Try again!"),o&&r&&r(o.swedish,o.english,"incorrect"),setTimeout(()=>j(""),1e3)),u("")},[f,g,r]),$=()=>{h(e=>"playing"===e?"paused":"playing")};return(0,o.useEffect)(()=>{m>=20&&(h("gameOver"),C(!0),setTimeout(()=>{C(!1),"function"===typeof s&&s()},2e3))},[m,s]),d.length?(0,a.jsxs)("div",{style:{maxWidth:400,margin:"2rem auto",background:B,padding:"1.5rem",borderRadius:16,boxShadow:T,textAlign:"center",border:`1px solid ${F}`},children:[(0,a.jsx)("h2",{style:{color:D,textAlign:"center",marginBottom:"1rem",fontSize:"2rem",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"\ud83c\udfae WORD FALL \ud83c\udfae"}),(0,a.jsxs)("div",{style:{textAlign:"center",marginBottom:"1rem",fontSize:"0.9rem",color:l?"#ccc":"#666",background:l?"#444":"#f0f0f0",padding:"0.5rem",borderRadius:6,border:"1px solid "+(l?"#555":"#ddd")},children:["Practising with ",d.length," beginner Swedish words"]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem",fontSize:"0.9rem",color:l?"#ccc":"#666",background:l?"#333":"#e8e8e8",padding:"0.8rem",borderRadius:8,border:"2px solid "+(l?"#555":"#ccc"),boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)"},children:[(0,a.jsxs)("span",{style:{fontWeight:"bold",color:"#FF6B6B"},children:["Score: ",m]}),(0,a.jsxs)("span",{style:{fontWeight:"bold",color:"#4ECDC4"},children:["Level: ",w]}),(0,a.jsxs)("span",{style:{fontWeight:"bold",color:"#FFEAA7"},children:["Lives: ","\u2764\ufe0f".repeat(x)]})]}),"ready"===c&&(0,a.jsx)("button",{onClick:()=>{h("playing"),b(0),y(3),v(1),p([]),j(""),R.current=Date.now(),A.current=2e3},style:{background:"linear-gradient(135deg, #FF6B6B, #4ECDC4)",color:"#fff",border:"none",borderRadius:12,padding:"1rem 2rem",fontWeight:"bold",fontSize:18,cursor:"pointer",marginBottom:"1rem",boxShadow:"0 6px 20px rgba(0,0,0,0.3)",transition:"all 0.3s ease",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",border:"2px solid rgba(255,255,255,0.2)"},onMouseEnter:e=>{e.target.style.transform="translateY(-3px)",e.target.style.boxShadow="0 8px 25px rgba(0,0,0,0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 6px 20px rgba(0,0,0,0.3)"},children:"\ud83d\ude80 START GAME \ud83d\ude80"}),"playing"===c&&(0,a.jsxs)("button",{onClick:$,style:{background:"#f39c12",color:"#fff",border:"none",borderRadius:8,padding:"0.5rem 1rem",fontWeight:"bold",fontSize:16,cursor:"pointer",marginBottom:"1rem"},children:[(0,a.jsx)(n.QG6,{style:{verticalAlign:"middle",marginRight:4}}),"Pause"]}),"paused"===c&&(0,a.jsxs)("button",{onClick:$,style:{background:"#27ae60",color:"#fff",border:"none",borderRadius:8,padding:"0.5rem 1rem",fontWeight:"bold",fontSize:16,cursor:"pointer",marginBottom:"1rem"},children:[(0,a.jsx)(n.XKH,{style:{verticalAlign:"middle",marginRight:4}}),"Resume"]}),(0,a.jsxs)("div",{style:{width:320,height:400,border:`2px solid ${F}`,borderRadius:8,margin:"0 auto 1rem",background:l?"#1a1a1a":"#f8f9fa",position:"relative",overflow:"hidden",boxShadow:"inset 0 0 10px rgba(0,0,0,0.1)"},children:[Array.from({length:8},(e,t)=>(0,a.jsx)("div",{style:{position:"absolute",left:40*t+"px",top:0,width:"1px",height:"100%",background:l?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",pointerEvents:"none"}},`grid-${t}`)),Array.from({length:10},(e,t)=>(0,a.jsx)("div",{style:{position:"absolute",left:0,top:40*t+"px",width:"100%",height:"1px",background:l?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",pointerEvents:"none"}},`grid-h-${t}`)),(0,a.jsx)("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"50px",background:"rgba(231, 76, 60, 0.15)",borderTop:"2px solid #e74c3c",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"#e74c3c",fontSize:"0.8rem",fontWeight:"bold"},children:"DANGER ZONE - Don't let words reach here!"}),g.map(e=>{var t,r,o,s;return(0,a.jsxs)("div",{style:{position:"absolute",left:Math.max(0,Math.min(e.x,320-((null===(t=e.shape)||void 0===t?void 0:t.width)||120))),top:e.y,background:e.answered?"#27ae60":e.color||"#e74c3c",color:"#fff",padding:"0.5rem",borderRadius:"O"===(null===(r=e.shape)||void 0===r?void 0:r.type)?"50%":"8px",fontSize:"0.9rem",fontWeight:"bold",width:(null===(o=e.shape)||void 0===o?void 0:o.width)||120,height:(null===(s=e.shape)||void 0===s?void 0:s.height)||40,textAlign:"center",transition:"all 0.1s ease",opacity:e.answered?.7:1,transform:e.answered?"scale(0.9)":"scale(1)",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 8px rgba(0,0,0,0.3), inset 0 2px 4px rgba(255,255,255,0.2)",border:`2px solid ${e.answered?"#27ae60":e.color||"#e74c3c"}`,textShadow:"1px 1px 2px rgba(0,0,0,0.8)"},children:[e.swedish,(0,a.jsx)("button",{type:"button","aria-label":`Play ${e.swedish}`,onClick:()=>async function(e){try{await i.A.playSwedish(e)}catch(t){if(console.log("TTS API failed, falling back to browser TTS:",t.message),"speechSynthesis"in window){window.speechSynthesis.cancel();const t=()=>{let t=window.speechSynthesis.getVoices().find(e=>e.name.toLowerCase().includes("alva")&&"sv-SE"===e.lang);const r=new window.SpeechSynthesisUtterance(e);r.lang="sv-SE",r.rate=.6,r.pitch=1,r.volume=1,t&&(r.voice=t),window.speechSynthesis.speak(r)};window.speechSynthesis.getVoices().length>0?t():window.speechSynthesis.onvoiceschanged=t}}}(e.swedish),style:{background:"none",border:"none",color:"#fff",cursor:"pointer",fontSize:16,marginLeft:4},children:(0,a.jsx)(n.guq,{})})]},e.id)})]}),"playing"===c&&(0,a.jsxs)("form",{onSubmit:I,style:{marginBottom:"1rem"},children:[(0,a.jsx)("input",{value:f,onChange:e=>u(e.target.value),placeholder:"Type English translation...",autoFocus:!0,style:{width:"100%",padding:12,borderRadius:8,border:`1px solid ${F}`,fontSize:16,background:l?"#444":"#fff",color:l?"#fff":"#000"}}),(0,a.jsx)("button",{type:"submit",style:{marginTop:8,width:"100%",background:"#2193b0",color:"#fff",border:"none",borderRadius:8,padding:12,fontWeight:"bold",fontSize:16,cursor:"pointer"},children:"Submit"})]}),S&&(0,a.jsx)("div",{style:{marginBottom:"1rem",fontWeight:"bold",fontSize:"1.1rem",color:S.includes("Correct")?"#27ae60":"#e74c3c"},children:S}),"gameOver"===c&&(0,a.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,a.jsx)("h3",{style:{color:m>=20?"#27ae60":"#e74c3c"},children:m>=20?"\ud83c\udf89 Congratulations! You won!":"Game Over!"}),(0,a.jsxs)("p",{children:["Final Score: ",m]}),(0,a.jsxs)("button",{onClick:()=>{h("ready"),b(0),y(3),v(1),p([]),u(""),j("")},style:{background:"#2193b0",color:"#fff",border:"none",borderRadius:8,padding:"0.8rem 1.5rem",fontWeight:"bold",fontSize:16,cursor:"pointer",marginRight:"0.5rem"},children:[(0,a.jsx)(n.joZ,{style:{verticalAlign:"middle",marginRight:4}}),"Play Again"]})]}),"ready"===c&&(0,a.jsxs)("div",{style:{fontSize:"0.9rem",color:l?"#ccc":"#666",textAlign:"left",background:l?"#444":"#f0f0f0",padding:"1rem",borderRadius:8,marginTop:"1rem"},children:[(0,a.jsx)("h4",{style:{marginTop:0},children:"How to play:"}),(0,a.jsxs)("ul",{style:{margin:"0.5rem 0",paddingLeft:"1.5rem"},children:[(0,a.jsx)("li",{children:"Swedish words fall from the top"}),(0,a.jsx)("li",{children:"Type the English translation before they reach the bottom"}),(0,a.jsx)("li",{children:"Click the speaker icon to hear pronunciation"}),(0,a.jsx)("li",{children:"Score 20 points to win!"}),(0,a.jsx)("li",{children:"Don't let words reach the bottom - you have 3 lives"})]})]}),k&&(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,fontSize:48,animation:"pop 2s"},children:(0,a.jsx)("span",{role:"img","aria-label":"confetti",children:"\ud83c\udf89\ud83c\udf8a\u2728\ud83c\udf89\ud83c\udf8a\u2728"})}),(0,a.jsx)("style",{children:"\n        @keyframes pop { \n          0%{opacity:0;transform:scale(0.7);} \n          20%{opacity:1;transform:scale(1.1);} \n          80%{opacity:1;} \n          100%{opacity:0;transform:scale(1);} \n        }\n      "})]}):(0,a.jsx)("div",{style:{textAlign:"center",marginTop:"2rem"},children:"No beginner words available for practice!"})}}}]);