"use strict";(self.webpackChunkflodhasten=self.webpackChunkflodhasten||[]).push([[857],{857:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var s=r(950),o=r(414);const n=(e,t,r)=>Math.max(t,Math.min(r,e));const i=function(e){let{words:t,onWordStatUpdate:r,onLessonComplete:i,isDarkMode:l}=e;const d=(0,s.useMemo)(()=>{const e=(t||[]).filter(e=>1===e.difficulty);return e.length?e:[{swedish:"vatten",english:"water",difficulty:1},{swedish:"sol",english:"sun",difficulty:1},{swedish:"man",english:"man",difficulty:1},{swedish:"kvinna",english:"woman",difficulty:1},{swedish:"\xe4ta",english:"eat",difficulty:1},{swedish:"sova",english:"sleep",difficulty:1},{swedish:"springa",english:"run",difficulty:1},{swedish:"se",english:"see",difficulty:1},{swedish:"r\xf6d",english:"red",difficulty:1},{swedish:"bl\xe5",english:"blue",difficulty:1},{swedish:"gul",english:"yellow",difficulty:1},{swedish:"gr\xf6n",english:"green",difficulty:1}]},[t]),a=20,c=Math.floor(18),h=Math.floor(19),[f,u]=(0,s.useState)("ready"),[g,y]=(0,s.useState)(0),[p,w]=(0,s.useState)(3),[x,v]=(0,s.useState)(1),[m,b]=(0,s.useState)([]),[j,k]=(0,s.useState)([]),[M,S]=(0,s.useState)(""),[L,C]=(0,s.useState)({cx:1,cy:1,vx:0,vy:0}),R=(0,s.useRef)(new Set),$=(0,s.useRef)(null),A=l?"#2d2d2d":"#e1f5fe",E=l?"#64b5f6":"#0288d1",K=l?"#555555":"transparent",W=(0,s.useCallback)(()=>{var e,t;const r=Array.from({length:h},()=>Array(c).fill(1));for(let l=0;l<c;l++)r[0][l]=0,r[h-1][l]=0;for(let l=0;l<h;l++)r[l][0]=0,r[l][c-1]=0;for(let l=2;l<h-2;l+=2)for(let e=2;e<c-2;e+=4)r[l][e]=0;for(let l=1;l<h-1;l++)for(let e=1;e<c-1;e++)Math.random()<.08?r[l][e]=0:0!==r[l][e]&&(r[l][e]=1);const s=[...d].sort(()=>Math.random()-.5).slice(8),o=[];let n=0;for(;n<6;){const e=2+Math.floor(Math.random()*(c-4)),t=2+Math.floor(Math.random()*(h-4));1===r[t][e]&&(r[t][e]=3,o.push({id:`w-${n}`,cx:e,cy:t,word:s[n%s.length]}),n++)}k(o);const i=(null===(e=o[Math.floor(Math.random()*o.length)])||void 0===e||null===(t=e.word)||void 0===t?void 0:t.english)||"";return S(i),r},[d,c,h]);return(0,s.useEffect)(()=>{const e=e=>R.current.add(e.code),t=e=>R.current.delete(e.code);return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,s.useEffect)(()=>{if("playing"===f)return $.current=setInterval(()=>{C(e=>{let t=0,r=0;R.current.has("ArrowLeft")||R.current.has("KeyA")?t=-1:R.current.has("ArrowRight")||R.current.has("KeyD")?t=1:R.current.has("ArrowUp")||R.current.has("KeyW")?r=-1:(R.current.has("ArrowDown")||R.current.has("KeyS"))&&(r=1);const s=n(e.cx+t,0,c-1),o=n(e.cy+r,0,h-1);return i=s,m[l=o]&&0!==m[l][i]?{cx:s,cy:o,vx:t,vy:r}:e;var i,l}),b(e=>{const t=e.map(e=>e.slice()),{cx:s,cy:o}=L;if(t[o]&&1===t[o][s]&&(t[o][s]=2,y(e=>e+1)),t[o]&&3===t[o][s]){const e=j.find(e=>e.cx===s&&e.cy===o);if(e){var n;if(((null===(n=e.word)||void 0===n?void 0:n.english)||"").toLowerCase()===(M||"").toLowerCase()){y(e=>e+10),r&&r(e.word.swedish,e.word.english,"correct");const n=j.filter(e=>!(e.cx===s&&e.cy===o));k(n),t[o][s]=2,n.length&&S(n[Math.floor(Math.random()*n.length)].word.english)}else w(e=>Math.max(0,e-1)),r&&r(e.word.swedish,e.word.english,"incorrect"),t[o][s]=2}}return t})},140),()=>{$.current&&clearInterval($.current)}},[f,L,c,h,j,M,r]),(0,s.useEffect)(()=>{p<=0&&"playing"===f&&u("over")},[p,f]),(0,s.useEffect)(()=>{if("playing"===f){m.flat().some(e=>1===e||3===e)||(x>=3?(u("complete"),"function"===typeof i&&i()):(v(e=>e+1),b(W()),C({cx:1,cy:1,vx:0,vy:0})))}},[m,x,f,W,i]),(0,o.jsxs)("div",{style:{maxWidth:400,margin:"2rem auto",background:A,padding:"1rem",borderRadius:16,boxShadow:l?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px #81d4fa",border:`1px solid ${K}`,textAlign:"center"},children:[(0,o.jsx)("h2",{style:{color:E,margin:0,marginBottom:8},children:"Glufs-Glufs Labyrint"}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8,fontSize:"0.9rem",color:l?"#ccc":"#666"},children:[(0,o.jsxs)("span",{children:["Po\xe4ng: ",(0,o.jsx)("strong",{children:g})]}),(0,o.jsxs)("span",{children:["Niv\xe5: ",(0,o.jsx)("strong",{children:x})]}),(0,o.jsxs)("span",{children:["Liv: ","\u2764\ufe0f".repeat(p)]})]}),"ready"===f?(0,o.jsx)("button",{onClick:()=>{y(0),w(3),v(1),b(W()),C({cx:1,cy:1,vx:0,vy:0}),u("playing")},style:{background:"#00796b",color:"#fff",border:"none",borderRadius:8,padding:"0.6rem 1rem",fontWeight:"bold",cursor:"pointer",marginBottom:8},children:"Starta"}):(0,o.jsx)(o.Fragment,{}),(0,o.jsxs)("div",{style:{width:360,height:420,margin:"0 auto",border:`2px solid ${K}`,borderRadius:8,background:l?"#111":"#f8f9fa",position:"relative",overflow:"hidden"},children:[(0,o.jsxs)("div",{style:{position:"absolute",left:0,right:0,top:0,height:40,display:"flex",alignItems:"center",justifyContent:"center",gap:6,color:l?"#ddd":"#333",fontWeight:"bold"},children:["Hitta ordet f\xf6r: ",(0,o.jsx)("span",{style:{color:E},children:M||"..."})]}),m.map((e,t)=>e.map((e,r)=>{var s,n;return 0===e?(0,o.jsx)("div",{style:{position:"absolute",left:r*a,top:40+t*a,width:a,height:a,background:"#263238"}},`w-${r}-${t}`):1===e?(0,o.jsx)("div",{style:{position:"absolute",left:r*a+10-2,top:40+t*a+10-2,width:4,height:4,background:"#90a4ae",borderRadius:2}},`d-${r}-${t}`):3===e?(0,o.jsx)("div",{style:{position:"absolute",left:r*a+2,top:40+t*a+2,padding:"2px 4px",background:"#8e24aa",color:"#fff",borderRadius:4,fontSize:10,border:"1px solid #4a148c"},children:null===(s=j.find(e=>e.cx===r&&e.cy===t))||void 0===s||null===(n=s.word)||void 0===n?void 0:n.swedish},`p-${r}-${t}`):null})),(0,o.jsx)("div",{style:{position:"absolute",left:L.cx*a+4,top:40+L.cy*a+4,width:12,height:12,background:"#ffca28",border:"2px solid #f57f17",borderRadius:"50%"}})]}),("over"===f||"complete"===f)&&(0,o.jsx)("div",{style:{marginTop:10},children:(0,o.jsx)("h3",{style:{color:"complete"===f?"#27ae60":"#e74c3c",margin:0},children:"complete"===f?"\ud83c\udf89 Klar!":"Game Over"})})]})}}}]);