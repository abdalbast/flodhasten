"use strict";(self.webpackChunkflodhasten=self.webpackChunkflodhasten||[]).push([[79],{79:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var o=n(950),r=n(222),s=n(840),i=n(414);const d=function(e){let{words:t,onWordStatUpdate:n,onLessonComplete:d,isDarkMode:l}=e;const a=(0,o.useMemo)(()=>{const e=(t||[]).filter(e=>1===e.difficulty);return(e.length?e:[{swedish:"hus",english:"house",difficulty:1},{swedish:"bil",english:"car",difficulty:1},{swedish:"\xe4pple",english:"apple",difficulty:1},{swedish:"hund",english:"dog",difficulty:1},{swedish:"katt",english:"cat",difficulty:1},{swedish:"bok",english:"book",difficulty:1},{swedish:"bord",english:"table",difficulty:1},{swedish:"stol",english:"chair",difficulty:1}]).sort(()=>Math.random()-.5)},[t]),[c,h]=(0,o.useState)("ready"),[u,f]=(0,o.useState)(0),[g,p]=(0,o.useState)(3),[y,w]=(0,o.useState)(1),[b,m]=(0,o.useState)(140),[x,v]=(0,o.useState)([]),[k,j]=(0,o.useState)([]),[S,C]=(0,o.useState)(null),R=(0,o.useRef)(new Set),M=(0,o.useRef)(null),E=(0,o.useRef)(0),L=420,W=l?"#2d2d2d":"#e1f5fe",$=l?"#64b5f6":"#0288d1",A=l?"#555555":"transparent",I=(0,o.useCallback)(()=>{var e,t;const n=Math.floor(280/6),o=[...a].sort(()=>Math.random()-.5),r=[];let s=0;for(let d=0;d<3;d++)for(let e=0;e<6;e++){const t=o[s++%o.length];r.push({id:`i-${Date.now()}-${d}-${e}`,x:20+e*n,y:68+34*d,word:t})}const i=(null===(e=r[Math.floor(Math.random()*r.length)])||void 0===e||null===(t=e.word)||void 0===t?void 0:t.english)||"";return C(i),r},[a]);(0,o.useEffect)(()=>{const e=e=>R.current.add(e.code),t=e=>R.current.delete(e.code);return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]);const B=(0,o.useCallback)(()=>{const e=Date.now();e-E.current<180||(E.current=e,v(t=>[...t,{id:`b-${e}`,x:b+10,y:368,vy:-6}]))},[b]);(0,o.useEffect)(()=>{if("playing"===c)return M.current=setInterval(()=>{m(e=>{return(R.current.has("ArrowLeft")||R.current.has("KeyA"))&&(e-=4),(R.current.has("ArrowRight")||R.current.has("KeyD"))&&(e+=4),t=e,n=6,o=290,Math.max(n,Math.min(o,t));var t,n,o}),R.current.has("Space")&&B(),v(e=>e.map(e=>({...e,y:e.y+e.vy})).filter(e=>e.y>50)),j(e=>e.map(e=>({...e,y:e.y+.3+.15*y}))),j(e=>{let t=e;return v(e=>{let o=e;for(const s of e){const e=t.findIndex(e=>s.x>=e.x&&s.x<=e.x+28&&s.y>=e.y&&s.y<=e.y+18);if(e>=0){var r;const i=t[e];o=o.filter(e=>e.id!==s.id);if(((null===(r=i.word)||void 0===r?void 0:r.english)||"").toLowerCase()===(S||"").toLowerCase()){f(e=>e+10),n&&n(i.word.swedish,i.word.english,"correct");const o=[...t.slice(0,e),...t.slice(e+1)];t=o;const r=o.length?o[Math.floor(Math.random()*o.length)].word.english:"";C(r)}else p(e=>Math.max(0,e-1)),n&&n(i.word.swedish,i.word.english,"incorrect");break}}return o}),t}),j(e=>e.some(e=>e.y>=334)?(p(e=>Math.max(0,e-1)),e.map(e=>({...e,y:e.y-20}))):e)},16),()=>{M.current&&clearInterval(M.current)}},[c,y,B,S]),(0,o.useEffect)(()=>{g<=0&&"playing"===c&&h("over")},[g,c]),(0,o.useEffect)(()=>{k.length||"playing"!==c||(y>=3?(h("complete"),"function"===typeof d&&d()):(w(e=>e+1),j(I())))},[k,y,c,I,d]);const D=()=>h(e=>"playing"===e?"paused":"playing");return(0,i.jsxs)("div",{style:{maxWidth:360,margin:"2rem auto",background:W,padding:"1rem",borderRadius:16,boxShadow:l?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px #81d4fa",border:`1px solid ${A}`},children:[(0,i.jsx)("h2",{style:{color:$,margin:0,marginBottom:8},children:"Ord-Inkr\xe4ktare"}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8,fontSize:"0.9rem",color:l?"#ccc":"#666"},children:[(0,i.jsxs)("span",{children:["Po\xe4ng: ",(0,i.jsx)("strong",{children:u})]}),(0,i.jsxs)("span",{children:["Niv\xe5: ",(0,i.jsx)("strong",{children:y})]}),(0,i.jsxs)("span",{children:["Liv: ","\u2764\ufe0f".repeat(g)]})]}),"ready"===c&&(0,i.jsx)("button",{onClick:()=>{f(0),p(3),w(1),m(140),v([]),j(I()),h("playing")},style:{background:"#1565c0",color:"#fff",border:"none",borderRadius:8,padding:"0.6rem 1rem",fontWeight:"bold",cursor:"pointer",marginBottom:8},children:"Starta"}),"playing"===c&&(0,i.jsxs)("button",{onClick:D,style:{background:"#f39c12",color:"#fff",border:"none",borderRadius:8,padding:"0.3rem 0.8rem",fontWeight:"bold",cursor:"pointer",marginBottom:8},children:[(0,i.jsx)(r.QG6,{style:{verticalAlign:"middle",marginRight:4}}),"Paus"]}),"paused"===c&&(0,i.jsxs)("button",{onClick:D,style:{background:"#27ae60",color:"#fff",border:"none",borderRadius:8,padding:"0.3rem 0.8rem",fontWeight:"bold",cursor:"pointer",marginBottom:8},children:[(0,i.jsx)(r.XKH,{style:{verticalAlign:"middle",marginRight:4}}),"Forts\xe4tt"]}),(0,i.jsxs)("div",{style:{width:320,height:L,border:`2px solid ${A}`,borderRadius:8,background:l?"#111":"#f8f9fa",position:"relative",overflow:"hidden",margin:"0 auto"},children:[(0,i.jsxs)("div",{style:{position:"absolute",left:0,right:0,top:0,height:60,display:"flex",alignItems:"center",justifyContent:"center",gap:6,color:l?"#ddd":"#333",fontWeight:"bold"},children:["Skjut ordet f\xf6r: ",(0,i.jsx)("span",{style:{color:$},children:S||"..."})]}),k.map(e=>(0,i.jsxs)("div",{title:`${e.word.swedish}`,style:{position:"absolute",left:e.x,top:e.y,width:28,height:18,background:"#8e24aa",color:"#fff",border:"2px solid #4a148c",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",fontSize:10,fontWeight:"bold"},children:[(0,i.jsx)("span",{style:{pointerEvents:"none"},children:e.word.swedish}),(0,i.jsx)("button",{type:"button","aria-label":`Play ${e.word.swedish}`,onClick:()=>async function(e){try{await s.A.playSwedish(e)}catch(t){if("speechSynthesis"in window){window.speechSynthesis.cancel();const t=()=>{const t=window.speechSynthesis.getVoices().find(e=>e.name.toLowerCase().includes("alva")&&"sv-SE"===e.lang),n=new SpeechSynthesisUtterance(e);n.lang="sv-SE",n.rate=.6,n.pitch=1,n.volume=1,t&&(n.voice=t),window.speechSynthesis.speak(n)};window.speechSynthesis.getVoices().length>0?t():window.speechSynthesis.onvoiceschanged=t}}}(e.word.swedish),style:{position:"absolute",right:-2,bottom:-2,background:"transparent",border:"none",color:"#fff",cursor:"pointer",fontSize:12},children:(0,i.jsx)(r.guq,{})})]},e.id)),x.map(e=>(0,i.jsx)("div",{style:{position:"absolute",left:e.x,top:e.y,width:2,height:10,background:"#ff5252",boxShadow:"0 0 6px rgba(255,82,82,0.8)"}},e.id)),(0,i.jsx)("div",{style:{position:"absolute",left:b,top:380,width:24,height:14,background:"#1565c0",border:"2px solid #0d47a1",borderRadius:2}})]}),("over"===c||"complete"===c)&&(0,i.jsxs)("div",{style:{marginTop:10},children:[(0,i.jsx)("h3",{style:{color:"complete"===c?"#27ae60":"#e74c3c",margin:0},children:"complete"===c?"\ud83c\udf89 Klar!":"Game Over"}),(0,i.jsxs)("button",{onClick:()=>{h("ready"),f(0),p(3),w(1),v([]),j([]),C("")},style:{background:"#1565c0",color:"#fff",border:"none",borderRadius:8,padding:"0.6rem 1.0rem",fontWeight:"bold",cursor:"pointer",marginTop:6},children:[(0,i.jsx)(r.joZ,{style:{verticalAlign:"middle",marginRight:4}}),"Spela igen"]})]})]})}}}]);