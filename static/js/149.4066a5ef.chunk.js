"use strict";(self.webpackChunkflodhasten=self.webpackChunkflodhasten||[]).push([[149],{149:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var r=o(950),n=o(222),i=o(840),s=o(414);const l=function(e){let{words:t,onWordStatUpdate:o,onLessonComplete:l,isDarkMode:a}=e;const d=t.filter(e=>1===e.difficulty),c=d.length>=10?d:t,[h,p]=(0,r.useState)("ready"),[u,y]=(0,r.useState)({x:50,y:300,vx:0,vy:0,onGround:!1,direction:1}),[g,x]=(0,r.useState)([]),[m,b]=(0,r.useState)([]),[f,w]=(0,r.useState)([]),[v,j]=(0,r.useState)([]),[S,k]=(0,r.useState)(1),[C,R]=(0,r.useState)(0),[F,A]=(0,r.useState)(3),[B,E]=(0,r.useState)(!1),[M,T]=(0,r.useState)(null),[W,z]=(0,r.useState)(""),[L,D]=(0,r.useState)(""),[G,$]=(0,r.useState)(!1),[I,U]=(0,r.useState)([]),P=(0,r.useRef)(null),K=(0,r.useRef)(new Set),Y=a?"#2d2d2d":"#e1f5fe",O=a?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px #81d4fa",V=a?"#64b5f6":"#0288d1",q=a?"#555555":"transparent",N=(0,r.useCallback)(e=>{const t=[{x:250,y:200,type:"coin",word:c[0],collected:!1},{x:450,y:150,type:"gem",word:c[1],collected:!1},{x:650,y:100,type:"coin",word:c[2],collected:!1},{x:850,y:50,type:"gem",word:c[3],collected:!1}];x([{x:0,y:350,width:800,height:50,type:"ground",bouncy:!1},{x:200,y:250,width:100,height:20,type:"platform",bouncy:!1},{x:400,y:200,width:100,height:20,type:"platform",bouncy:!0},{x:600,y:150,width:100,height:20,type:"platform",bouncy:!1},{x:800,y:100,width:100,height:20,type:"platform",bouncy:!0}]),b(t),j([{x:900,y:50,width:60,height:80,type:"checkpoint",challenge:"grammar",unlocked:!1}]),w([])},[c]);(0,r.useEffect)(()=>{const e=e=>{K.current.add(e.code)},t=e=>{K.current.delete(e.code)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]);const X=(0,r.useCallback)(()=>{"playing"===h&&(y(e=>{let t=e.vx,o=e.vy+.6,r=e.x,n=e.y,i=!1,s=e.direction;K.current.has("ArrowLeft")||K.current.has("KeyA")?(t=Math.max(t-3,-6),s=-1):K.current.has("ArrowRight")||K.current.has("KeyD")?(t=Math.min(t+3,6),s=1):e.onGround?t*=.85:t*=.95,(K.current.has("Space")||K.current.has("ArrowUp")||K.current.has("KeyW"))&&e.onGround?(o=-18,i=!1):(K.current.has("Space")||K.current.has("ArrowUp")||K.current.has("KeyW"))&&o<0&&(o+=.8),o=Math.min(o,12),r+=t,n+=o;let l=!1;if(g.forEach(e=>{r<e.x+e.width&&r+30>e.x&&n<e.y+e.height&&n+30>e.y&&(l=!0,o>0&&n<e.y?(n=e.y-30,e.bouncy?(o=18*.6,t*=1.2):(o=0,t*=.8),i=!0):o<0&&n+30>e.y+e.height?(n=e.y+e.height,o=e.bouncy?.8*Math.abs(o):0,t*=.9):t>0&&r<e.x?(r=e.x-30,t=e.bouncy?.7*-Math.abs(t):0):t<0&&r+30>e.x+e.width&&(r=e.x+e.width,t=e.bouncy?.7*Math.abs(t):0))}),!e.onGround&&l&&(t>0||t<0)&&(o=Math.min(o,2),(K.current.has("Space")||K.current.has("ArrowUp")||K.current.has("KeyW"))&&(o=-12.6,t=-6*s*.8,i=!1)),r<0&&(r=0,t=.3*Math.abs(t)),r>770&&(r=770,t=.3*-Math.abs(t)),n>320&&(n=320,o=0,i=!0,t*=.7),Math.abs(t)<.1&&(t=0),Math.abs(o)<.1&&(o=0),e.onGround&&!i&&o<0){const e=Array.from({length:3},(e,t)=>({id:Date.now()+t,x:r+15,y:n+30,vx:4*(Math.random()-.5),vy:2*Math.random(),life:30,color:"#8B4513"}));U(t=>[...t,...e])}if(Math.abs(t)>3&&(0===r||770===r)){const e=Array.from({length:2},(e,t)=>({id:Date.now()+t+100,x:r+(0===r?0:30),y:n+15,vx:(0===r?1:-1)*Math.random()*3,vy:2*(Math.random()-.5),life:25,color:"#654321"}));U(t=>[...t,...e])}return{...e,x:r,y:n,vx:t,vy:o,onGround:i,direction:s}}),b(e=>e.map(e=>!e.collected&&u.x<e.x+20&&u.x+30>e.x&&u.y<e.y+20&&u.y+30>e.y?(T({type:"collectible",word:e.word,collectible:e}),E(!0),p("paused"),e):e)),v.forEach(e=>{!e.unlocked&&u.x<e.x+e.width&&u.x+30>e.x&&u.y<e.y+e.height&&u.y+30>e.y&&(T({type:"door",challenge:e.challenge,door:e}),E(!0),p("paused"))}),U(e=>e.map(e=>({...e,x:e.x+e.vx,y:e.y+e.vy,vy:e.vy+.2,life:e.life-1})).filter(e=>e.life>0)),u.y>400&&(A(e=>e<=1?(p("gameOver"),0):e-1),y(e=>({...e,x:50,y:300,vx:0,vy:0}))),u.x>950&&p("levelComplete"))},[h,u,g,m,v,F]);(0,r.useEffect)(()=>("playing"===h?P.current=setInterval(X,16):P.current&&(clearInterval(P.current),P.current=null),()=>{P.current&&clearInterval(P.current)}),[h,X]);const H=(0,r.useCallback)(e=>{var t;if(e.preventDefault(),!W.trim())return;if(W.trim().toLowerCase()===(null===(t=M.word)||void 0===t?void 0:t.english.toLowerCase()))D("\u2705 Correct!"),R(e=>e+10),"collectible"===M.type?(b(e=>e.map(e=>e===M.collectible?{...e,collected:!0}:e)),o&&o(M.word.swedish,M.word.english,"correct")):"door"===M.type&&j(e=>e.map(e=>e===M.door?{...e,unlocked:!0}:e)),setTimeout(()=>{E(!1),T(null),D(""),p("playing")},1e3);else{var r,n;if(D("\u274c Try again!"),o)o(null===(r=M.word)||void 0===r?void 0:r.swedish,null===(n=M.word)||void 0===n?void 0:n.english,"incorrect");setTimeout(()=>D(""),1e3)}z("")},[W,M,o]),J=()=>{p(e=>"playing"===e?"paused":"playing")},Z=()=>{p("ready"),R(0),A(3),k(1),y({x:50,y:300,vx:0,vy:0,onGround:!1,direction:1}),x([]),b([]),w([]),j([]),E(!1),T(null),z(""),D("")};return(0,r.useEffect)(()=>{"levelComplete"===h&&($(!0),setTimeout(()=>{$(!1),"function"===typeof l&&l()},2e3))},[h,l]),c.length?(0,s.jsxs)("div",{style:{maxWidth:1e3,margin:"2rem auto",background:Y,padding:"1.5rem",borderRadius:16,boxShadow:O,textAlign:"center",border:`1px solid ${q}`},children:[(0,s.jsx)("h2",{style:{color:V,textAlign:"center",marginBottom:"1rem",fontSize:"2rem",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.3)"},children:"\ud83c\udfae PLATFORMER ADVENTURE \ud83c\udfae"}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem",fontSize:"0.9rem",color:a?"#ccc":"#666",background:a?"#333":"#e8e8e8",padding:"0.8rem",borderRadius:8,border:"2px solid "+(a?"#555":"#ccc"),boxShadow:"inset 0 2px 4px rgba(0,0,0,0.1)"},children:[(0,s.jsxs)("span",{style:{fontWeight:"bold",color:"#FF6B6B"},children:["Score: ",C]}),(0,s.jsxs)("span",{style:{fontWeight:"bold",color:"#4ECDC4"},children:["Level: ",S]}),(0,s.jsxs)("span",{style:{fontWeight:"bold",color:"#FFEAA7"},children:["Lives: ","\u2764\ufe0f".repeat(F)]})]}),"ready"===h&&(0,s.jsx)("button",{onClick:()=>{p("playing"),R(0),A(3),k(1),y({x:50,y:300,vx:0,vy:0,onGround:!1,direction:1}),N(1),E(!1),T(null),D("")},style:{background:"linear-gradient(135deg, #FF6B6B, #4ECDC4)",color:"#fff",border:"none",borderRadius:12,padding:"1rem 2rem",fontWeight:"bold",fontSize:18,cursor:"pointer",marginBottom:"1rem",boxShadow:"0 6px 20px rgba(0,0,0,0.3)",transition:"all 0.3s ease",textShadow:"1px 1px 2px rgba(0,0,0,0.5)",border:"2px solid rgba(255,255,255,0.2)"},onMouseEnter:e=>{e.target.style.transform="translateY(-3px)",e.target.style.boxShadow="0 8px 25px rgba(0,0,0,0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 6px 20px rgba(0,0,0,0.3)"},children:"\ud83d\ude80 START ADVENTURE \ud83d\ude80"}),"playing"===h&&(0,s.jsxs)("button",{onClick:J,style:{background:"#f39c12",color:"#fff",border:"none",borderRadius:8,padding:"0.5rem 1rem",fontWeight:"bold",fontSize:16,cursor:"pointer",marginBottom:"1rem"},children:[(0,s.jsx)(n.QG6,{style:{verticalAlign:"middle",marginRight:4}}),"Pause"]}),"paused"===h&&!B&&(0,s.jsxs)("button",{onClick:J,style:{background:"#27ae60",color:"#fff",border:"none",borderRadius:8,padding:"0.5rem 1rem",fontWeight:"bold",fontSize:16,cursor:"pointer",marginBottom:"1rem"},children:[(0,s.jsx)(n.XKH,{style:{verticalAlign:"middle",marginRight:4}}),"Resume"]}),(0,s.jsxs)("div",{style:{width:1e3,height:400,border:`2px solid ${q}`,borderRadius:8,margin:"0 auto 1rem",background:"linear-gradient(to bottom, #87CEEB, #98FB98)",position:"relative",overflow:"hidden",boxShadow:"inset 0 0 10px rgba(0,0,0,0.1)"},children:[g.map((e,t)=>(0,s.jsx)("div",{style:{position:"absolute",left:e.x,top:e.y,width:e.width,height:e.height,background:"ground"===e.type?"#8B4513":e.bouncy?"#FFD700":"#228B22",border:"2px solid "+(e.bouncy?"#FF8C00":"#654321"),borderRadius:"ground"===e.type?0:4,boxShadow:e.bouncy?"0 0 10px rgba(255, 215, 0, 0.5)":"none",animation:e.bouncy?"bounce 2s infinite":"none"}},`platform-${t}`)),m.map((e,t)=>!e.collected&&(0,s.jsx)("div",{style:{position:"absolute",left:e.x,top:e.y,width:20,height:20,background:"coin"===e.type?"#FFD700":"#FF69B4",borderRadius:"50%",border:"2px solid #FF8C00",animation:"bounce 1s infinite"}},`collectible-${t}`)),v.map((e,t)=>(0,s.jsx)("div",{style:{position:"absolute",left:e.x,top:e.y,width:e.width,height:e.height,background:e.unlocked?"#32CD32":"#DC143C",border:"3px solid #8B0000",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"bold",fontSize:"0.8rem"},children:e.unlocked?"\u2713":"\ud83d\udd12"},`door-${t}`)),I.map(e=>(0,s.jsx)("div",{style:{position:"absolute",left:e.x,top:e.y,width:4,height:4,background:e.color,borderRadius:"50%",opacity:e.life/30,transform:`scale(${e.life/30})`}},e.id)),(0,s.jsx)("div",{style:{position:"absolute",left:u.x,top:u.y,width:30,height:30,background:u.onGround?"#FF6B6B":"#FF8E8E",borderRadius:"50%",border:"2px solid "+(u.onGround?"#8B0000":"#CC0000"),transform:`scaleX(${u.direction})`,transition:"transform 0.1s ease",boxShadow:u.onGround?"0 2px 4px rgba(0,0,0,0.3)":"0 4px 8px rgba(0,0,0,0.4)",filter:u.onGround?"none":"brightness(1.1)"}}),(0,s.jsx)("div",{style:{position:"absolute",left:u.x+5,top:u.y+32,width:20,height:8,background:"rgba(0,0,0,0.2)",borderRadius:"50%",transform:`scaleX(${1-.02*Math.abs(u.vy)})`,opacity:.6}}),(0,s.jsx)("div",{style:{position:"absolute",left:950,top:50,width:20,height:100,background:"#FFD700",border:"2px solid #FF8C00"}}),(0,s.jsx)("div",{style:{position:"absolute",left:970,top:50,width:30,height:30,background:"#FF0000",borderRadius:"50%",border:"2px solid #8B0000"}})]}),B&&M&&(0,s.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,s.jsxs)("div",{style:{background:Y,padding:"2rem",borderRadius:16,maxWidth:400,textAlign:"center",border:`2px solid ${q}`,boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},children:[(0,s.jsx)("h3",{style:{color:V,marginBottom:"1rem"},children:"collectible"===M.type?"\ud83c\udfaf Language Challenge!":"\ud83d\udeaa Door Challenge!"}),"collectible"===M.type&&(0,s.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:8},children:[(0,s.jsx)("span",{style:{fontSize:"1.5rem",color:V},children:M.word.swedish}),(0,s.jsx)("button",{type:"button","aria-label":`Play ${M.word.swedish}`,onClick:()=>async function(e){try{await i.A.playSwedish(e)}catch(t){if(console.log("TTS API failed, falling back to browser TTS:",t.message),"speechSynthesis"in window){window.speechSynthesis.cancel();const t=()=>{let t=window.speechSynthesis.getVoices().find(e=>e.name.toLowerCase().includes("alva")&&"sv-SE"===e.lang);const o=new window.SpeechSynthesisUtterance(e);o.lang="sv-SE",o.rate=.6,o.pitch=1,o.volume=1,t&&(o.voice=t),window.speechSynthesis.speak(o)};window.speechSynthesis.getVoices().length>0?t():window.speechSynthesis.onvoiceschanged=t}}}(M.word.swedish),style:{background:"none",border:"none",color:V,cursor:"pointer",fontSize:22},children:(0,s.jsx)(n.guq,{})})]}),(0,s.jsx)("p",{children:"Translate this word to English:"})]}),"door"===M.type&&(0,s.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,s.jsx)("p",{children:"Answer this grammar question to unlock the door:"}),(0,s.jsx)("p",{style:{fontSize:"1.2rem",fontWeight:"bold",color:V},children:'What is the correct article for "\xe4pple" (apple)?'}),(0,s.jsx)("p",{style:{fontSize:"0.9rem",color:"#666"},children:'Hint: "\xe4pple" is a neuter noun'})]}),(0,s.jsxs)("form",{onSubmit:H,children:[(0,s.jsx)("input",{value:W,onChange:e=>z(e.target.value),placeholder:"collectible"===M.type?"Type English translation...":"Type your answer...",autoFocus:!0,style:{width:"100%",padding:12,borderRadius:8,border:`1px solid ${q}`,fontSize:16,background:a?"#444":"#fff",color:a?"#fff":"#000",marginBottom:"1rem"}}),(0,s.jsx)("button",{type:"submit",style:{width:"100%",background:"#2193b0",color:"#fff",border:"none",borderRadius:8,padding:12,fontWeight:"bold",fontSize:16,cursor:"pointer"},children:"Submit Answer"})]}),L&&(0,s.jsx)("div",{style:{marginTop:"1rem",fontWeight:"bold",fontSize:"1.1rem",color:L.includes("Correct")?"#27ae60":"#e74c3c"},children:L})]})}),(0,s.jsxs)("div",{style:{fontSize:"0.9rem",color:a?"#ccc":"#666",textAlign:"center",background:a?"#444":"#f0f0f0",padding:"1rem",borderRadius:8,marginTop:"1rem"},children:[(0,s.jsx)("h4",{style:{marginTop:0},children:"Controls:"}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"2rem",flexWrap:"wrap"},children:[(0,s.jsxs)("span",{children:[(0,s.jsx)(n.l7J,{})," Move Left"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)(n.U7T,{})," Move Right"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)(n.tvt,{})," Jump"]})]}),(0,s.jsx)("p",{style:{marginTop:"1rem",marginBottom:0},children:"Collect coins and gems by answering language questions, unlock doors with grammar challenges!"}),(0,s.jsxs)("div",{style:{marginTop:"0.5rem",fontSize:"0.8rem",color:"#888"},children:[(0,s.jsx)("strong",{children:"Physics Features:"})," Momentum, friction, wall jumping, bouncy platforms, particle effects"]})]}),"gameOver"===h&&(0,s.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,s.jsx)("h3",{style:{color:"#e74c3c"},children:"Game Over!"}),(0,s.jsxs)("p",{children:["Final Score: ",C]}),(0,s.jsxs)("button",{onClick:Z,style:{background:"#2193b0",color:"#fff",border:"none",borderRadius:8,padding:"0.8rem 1.5rem",fontWeight:"bold",fontSize:16,cursor:"pointer",marginRight:"0.5rem"},children:[(0,s.jsx)(n.joZ,{style:{verticalAlign:"middle",marginRight:4}}),"Play Again"]})]}),"levelComplete"===h&&(0,s.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,s.jsx)("h3",{style:{color:"#27ae60"},children:"\ud83c\udf89 Level Complete! \ud83c\udf89"}),(0,s.jsxs)("p",{children:["Score: ",C]}),(0,s.jsxs)("button",{onClick:Z,style:{background:"#2193b0",color:"#fff",border:"none",borderRadius:8,padding:"0.8rem 1.5rem",fontWeight:"bold",fontSize:16,cursor:"pointer",marginRight:"0.5rem"},children:[(0,s.jsx)(n.joZ,{style:{verticalAlign:"middle",marginRight:4}}),"Play Again"]})]}),G&&(0,s.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,fontSize:48,animation:"pop 2s"},children:(0,s.jsx)("span",{role:"img","aria-label":"confetti",children:"\ud83c\udf89\ud83c\udf8a\u2728\ud83c\udf89\ud83c\udf8a\u2728"})}),(0,s.jsx)("style",{children:"\n        @keyframes pop { \n          0%{opacity:0;transform:scale(0.7);} \n          20%{opacity:1;transform:scale(1.1);} \n          80%{opacity:1;} \n          100%{opacity:0;transform:scale(1);} \n        }\n        @keyframes bounce {\n          0%, 20%, 50%, 80%, 100% {transform: translateY(0);}\n          40% {transform: translateY(-10px);}\n          60% {transform: translateY(-5px);}\n        }\n      "})]}):(0,s.jsx)("div",{style:{textAlign:"center",marginTop:"2rem"},children:"No beginner words available for practice!"})}}}]);